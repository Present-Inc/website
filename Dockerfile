# * base image comes with node.js 0.10.29
FROM danscan/node

# =========================================================
# BEGIN Configure Application
# =========================================================

# Port
ENV APP_PORT 80

# Debug (logs)
ENV DEBUG * -stdloggly

# =========================================================
# END Configure Application
# =========================================================

# =========================================================
# BEGIN Build App Release
# =========================================================

# ---------------------------------------------------------
# Copy App Repo Into Release
# ---------------------------------------------------------
ADD . /var/app

# ---------------------------------------------------------
# Fetch, Build, and Install Dependencies
# ---------------------------------------------------------
RUN cd /var/app && npm install

# ---------------------------------------------------------
# Expose Api App Port
# ---------------------------------------------------------
EXPOSE 80

# ---------------------------------------------------------
# Set App as Default Command
# ---------------------------------------------------------
CMD node /var/app/server.js
